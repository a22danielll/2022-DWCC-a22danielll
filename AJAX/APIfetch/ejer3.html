<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>pokemon</h1>
    <h2></h2>

    <input type="submit" id="actualizar" name="actualizar" value="actualizar" />
    <script>
      let body = document.getElementsByTagName('body');
      let btn = document.getElementById('actualizar');
      let h2 = document.getElementsByTagName('h2')[0];
      let h1 = document.getElementsByTagName('h1')[0];
      let img = document.createElement('img');

      btn.addEventListener(
        'click',
        (mostrar = e => {
          console.log(e);
          let id = Math.floor(Math.random() * 1008);
          let ruta = 'https://pokeapi.co/api/v2/pokemon/';
          let url = ruta + id;
          let div = document.createElement('div');
          let p = document.createElement('p');
          let promesa = fetch(url)
            .then(response => {
              if (response.ok) return response.json();
              return promesa.reject(response);
            })
            .then(function (pokemon) {
              console.log(pokemon);
              let imagen = pokemon['sprites'].other.home.front_default;
              img.setAttribute('src', imagen);
              document.body.append(img);
              h2.textContent = pokemon.name;
              //body.append(h2);

              let skill = pokemon.abilities;
              for (let i = 0; i < skill.length; i++) {
                let element = skill[i];
                let p = document.createElement('p');
                p.textContent = element.ability.name;
                document.body.append(p);
                console.log(p);
              }
              m2();
            });
        })
      );

      function m2(pokemon) {
        let skill = pokemon.abilities;
        for (let i = 0; i < skill.length; i++) {
          let element = skill[i];

          p.textContent = element.ability.name;
          document.body.append(div);
          //document.body.append(p);
          div.append(p);
          console.log(div);
        }
      }
    </script>
  </body>
</html>
