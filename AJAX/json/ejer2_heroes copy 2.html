<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />

    <title>Our superheroes</title>

    <link
      href="https://fonts.googleapis.com/css?family=Faster+One"
      rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <header></header>

    <section></section>

    <script>
      "use strict";
      let heroes = new XMLHttpRequest();

      heroes.open(
        "GET",
        "https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json"
      );
      heroes.responseType = "json";
      // send request
      heroes.send();

      heroes.addEventListener("load", () => {
        let contenido = heroes.response;
        console.log(contenido);
        let header = document.getElementsByTagName("header").item(0);
        let section = document.getElementsByTagName("section").item(0);
        let article = document.createElement("article");
        let h1 = document.createElement("h1");
        let h2 = document.createElement("h2");
        let ul = document.createElement("ul");
        let li = document.createElement("li");
        let p = document.createElement("p");

        h1.innerHTML = contenido.squadName;
        p.innerHTML =
          "Hometown: " + contenido.homeTown + " //Formed: " + contenido.formed;

        for (let i = 0; i < contenido.members.length; i++) {
          let element = contenido.members[i];
          element.powers.forEach((e) => {
            li.innerHTML = e;
            ul.append(li);
          });

          article.innerHTML = `
        <h2>${element.name}</h2>
        <p>Secret identity: ${element.secretIdentity}</p>
        <p>Age:${element.age}</p>
        <p>Superpowers:</p>
      `;
          header.append(h1);
          header.append(p);
          article.append(ul);
          section.append(article);
        }
      });
    </script>
  </body>
</html>
